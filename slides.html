<!doctype html>
<html lang="en">
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="style.css" />
<script defer src="slideshow.js"></script>
<script defer src="named-element-breakpoints.js"></script>
<link rel="stylesheet" href="prism.css" />
<script defer src="prism.js"></script>
<script defer src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
<title>Slides</title>
</head>
<body>

<section id="1" class="title">
	<h1>
		<span>Contain</span>
		<span class="twox" style="display: block; border-top: 1px solid white;">Your Excitement</span>
	</h1>
	<hr style="width: 10em; margin: 0;" />
	<p class="twox center" style="color: var(--light-fg);">
		Eric Portis ‚òÖ SmashingConf NYC ‚òÖ 2017-06-13
	</p>
</section>

<section class="title" id="2">
	<h1>Who am I?</h1>
	<img src="images/_headshot2.jpg" alt="Headshot" id="headshot"
		style="
			border-radius: 100%;
			border: 0.175em solid var( --light-bg );
			box-shadow: var( --box-shadow );
			margin-top: -0.5em;
			margin-left: 5em;
			width: 4em;
			rotate: 5deg;
		"
	/>
	<div class="layer" id="eric-arrow" style="padding-top: 5em; padding-right: 1em;">
		<img src="images/arrow.svg" alt="arrow" style="height: 2em; padding-left: 0.25em;" />
		<p
			class="thin"
			style="
				text-transform: uppercase;
				rotate: -5deg;
				font-size: 1.25em;
				margin-top: -0.05em;
			"
		>
			Eric!
		</p>
	</div>
	<aside class="notes">


The notes go here.

Do carriage returns work?

I wonder.

	</aside>
	<script>
		var section = document.currentScript.parentNode;
		
		section.init = ( ( section ) => {
			section.elementsToReveal = [
				section.querySelector( '#headshot' ),
				section.querySelector( '#eric-arrow' )
			]
			for ( element of section.elementsToReveal ) {
				element.classList.add( 'hidden' );
			}
		} );
		
		section.events = [
			{
				do: ( section ) => {
					for ( element of section.elementsToReveal ) {
						element.classList.remove( 'hidden' );
					}
				},
				undo: ( section ) => {
					for ( element of section.elementsToReveal ) {
						element.classList.add( 'hidden' );
					}
				}
			}
		];
	</script>
</section>

<section class="whatido" style="align-content: stretch;">
<style>
.whatido ul {
	list-style: none;
	display: flex;
	flex-direction: column;
	justify-content: space-around;
	height: 100%;
	padding-bottom: 10vh;
	padding-top: 10vh;
}
.whatido .what {
	font-family: SooperSerifThinCondensed2x;
	text-transform: uppercase;
	font-size: 1.5em;
	display: block;
}
.whatido .where {
	color: var(--light-fg);
	font-size: 0.75em;
	display: block;
}
</style>
<ul>
<li><span class="what">Developer Advocate</span> <span class="where">@ Cloudinary</span></li>
<li><span class="what">Hanger-on</span> <span class="where">@ Responsive Issues Community Group</li>
<li><span class="what">Lapsed printmaker-photographer</span> <span class="where">@ Remote Island in Puget Sound</li>
</ul>
<aside class="notes">
Developer Evangelist at Cloudinary, which is an image back-end for web and mobile developers. We help you manage image upload, storage, manipulation, and delivery. If you work with images, especially responsive images, like the ones I‚Äôll be talking about tonight ‚Äî Cloudinary can help you do that work better.

Before I worked at cloudinary, I managed the web store of a tiny fine art print shop in Denver Colorado‚Ä¶ and got *really* upset with the way images worked within responsive layouts‚Ä¶ yadda yadda yadda, I was spending hours in WHATWG mailing lists and writing a weekly newsletter for the responsie images community group, which spec‚Äôd and implemented the features I‚Äôm going to be talkign about today

I still like art, and I live on an island now where I kind of wander around and take weird infared photographs of kelp and things‚Ä¶
the island is called orcas island ; if any of you are ever out in the san juans ; it‚Äôs beautiful and you should all come visit

but enough about me
</aside>
</section>

<section id="2" class="title">
	<h1>Element queries!</h1>
	<div class="layer">
		<p style="
			position: relative;
			left: -3.33rem;
			top: -0.125em;
			margin-top: -2px;
			font-size: 1.33em;
			text-transform: uppercase;
			padding: 0.25em;
			padding-bottom: 0.05em;
			rotate: -7deg;
			background-color: var(--light-bg);
			box-shadow: var(--box-shadow);
			font-family: SooperSansThick;
			border-radius: 0.1em;
		">
			Container?
		</p>
	</div>
	<aside class="notes">
Let‚Äôs talk about element queries!

[click]

Or container queries, or whatever.
I suppose a brief note on terminology is in order
	</aside>
	<script>
		var section = document.currentScript.parentNode;

		section.init = ( ( section ) => {
			section.stickerLayer = section.querySelector( '.layer' );
			section.stickerLayer.classList.add('hidden');
		} );
		
		section.events = [
			{
				do: ( section ) => {
					section.stickerLayer.classList.remove('hidden');
				},
				undo: ( section ) => {
					section.stickerLayer.classList.add('hidden');
				}
			}
		];
	</script>
</section>

<section class="center">
<p style="font-size: 1.5em;">‚ÄúElement?‚Äù ‚ÄúContainer?‚Äù</p>
<h1 style="margin-top: 0.25em;">Same-same.</h1>
<aside class="notes">
We‚Äôll get into the distinction between ‚Äúelement‚Äù and ‚Äúcontainer‚Äù queries a bit later, but for the first part of this talk, I and some folks that I‚Äôll be quoting will use the terms more or less interchangably.
</aside>
</section>


<section class="center">
<p>Whatever you call them, they‚Äôre</p>
<h1 style="margin-top: 0.25em;">media queries for elements</h1>
<aside class="notes">
And I‚Äôll be using the terms to refer to an idea. In a nutshell: we should be able to adapt element‚Äôs styles based on their own state. Not just the state of the entire viewport.
</aside>
</section>


<section id="2">
	<h1>Media queries are a whole-viewport-solution...</h1>
	<p>...designed to solve whole-document problems.</p>
	<aside class="notes">
It‚Äôs worth taking a moment to think about about where Media Queries came from.

How many of are old enough to have written a print-specific stylesheet?
	</aside>
</section>


<section id="3" class="code">

<pre class="before" style="height: 8em;"><code class="language-html">
&lt;link rel="stylesheet" type="text/css" 
  media="screen" href="screen.css"&gt;
&lt;link rel="stylesheet" type="text/css" 
  media="print" href="print.css"&gt;
</code></pre>

<pre class="after" style="height: 8em;"><code class="language-css">
@media print {
  * { font-family: serif }
}
</code></pre>

<pre class="afterafter" style="height: 8em;"><code class="language-css">
@media screen and (min-width: 400px) {
	...
}
</code></pre>

<footer><p>Example from <a href="https://www.w3.org/TR/2002/CR-css3-mediaqueries-20020708/">the original Media Queries specification</a>, published in 2002.</p></footer>

<aside class="notes">
Well the original media queries spec, published fifteen years ago next month, opens with the following example. This is something that I‚Äôm just barely old enough to remember. But ten or twenty years ago, it was not unheard of for webmasters to provide one style sheet for screens, and a completely different stylesheet for print, containing page styles tailored for 8.5x11, high-resolution, black-and-white, laser-printed pieces of good-old-fashioned paper.

The media queries spec says, hey, this is a decently common use case -- how about we let you wrap these two sets of styles up into the same stylesheet, like this [click]. Media queries let you wrap your media-specific styles in a little @media block -- no separate stylesheet required.

As luck would have it, the spec authors also decided that, as long as they were letting you query media *types*, why not also let you query device characteristics, like, say, width? [click]

And just like that, the media queries we all know and love -- along with so much of what we now call "responsive design" -- was born.
</aside>

	<script>
		var section = document.currentScript.parentNode;

		section.init = ( ( section ) => {
			section.before = section.querySelector( '.before' );
			section.after = section.querySelector( '.after' );
			section.afterafter = section.querySelector( '.afterafter' );
			section.after.style.display = 'none';
			section.afterafter.style.display = 'none';
		} );
		
		section.events = [
			{
				do: ( section ) => {
					section.after.style.display = 'block';
					section.before.style.display = 'none';
				},
				undo: ( section ) => {
					section.after.style.display = 'none';
					section.before.style.display = 'block';
				}
			},
			{
				do: ( section ) => {
					section.after.style.display = 'none';
					section.afterafter.style.display = 'block';
				},
				undo: ( section ) => {
					section.after.style.display = 'block';
					section.afterafter.style.display = 'none';
				}
			}
		];
	</script>

</section>

<section class="center">
<h1>Modular components</h1>
<aside class="notes">
But increasingly, we‚Äôre designing modular COMPONENTS, not pages.

Whether you‚Äôre working with Web Components, React components, Brad‚Äôs Atomic design elements, pattern libraries and style-guide deliverables, or even just the general notion that we should be designing from the content, out, rather than the page‚Äôs frame, in ‚Äì¬†media queries can be a bit of a kludge.

</aside>
</section>


<section id="eq-example" class="code">
<div style="--height: 4em; height: var(--height); width: 100vw;">
	<div class="resizable" id="example_1495648141"
		style="
			height: 100%;
			width: var(--height);
			max-width: 100%; /* dosent do anything argh */
			background-color: white;
		"
	>
		<style>
			#example_1495648141 .container {
				display: grid;
				--margin: 0.25rem;
				grid-template-columns: repeat(auto-fit, minmax(1px, 1fr));
				grid-gap: var(--margin);
				margin: var(--margin);
			}
			#example_1495648141 .block {
				--named-breakpoints: 100px make-it-blue;
				height: calc( var(--height) - var(--margin) * 2 );
				background-color: lightblue;

			}
			#example_1495648141 .block.make-it-blue {
				background-color: deeppink;
			}

		</style>
		<div class="container">
			<div class="block"></div>
			<div class="block"></div>
			<div class="block"></div>
			<div class="block"></div>
			<div class="block"></div>
		</div>
	</div>
</div>
<pre style="margin-bottom: -1.25em;"><code class="language-css">
.block {
	background-color: lightblue; 
}
</code></pre>
<pre class="mediaquery" style="height: 8em;"><code class="language-css">
@media (min-width: 571px) {
	.block {
		background-color: deeppink;
	}
}
</code></pre>
<pre class="elementquery" style="height: 8em;"><code class="language-css">
.block:when(min-width: 100px) {
	background-color: deeppink;
}
</code></pre>
	<script>
	var section = document.currentScript.parentNode;

	section.init = ( ( section ) => {
		section.mediaquery = section.querySelector( '.mediaquery' );
		section.elementquery = section.querySelector( '.elementquery' );
		section.mediaquery.classList.add( 'hidden' );
		section.elementquery.classList.add( 'none' );
		section.container = section.querySelector( '.container' );
		section.lastDiv = section.container.querySelector('.block:last-child');
	} );
	
	section.events = [
		{ // show the media query
			do: ( section ) => {
				section.mediaquery.classList.remove( 'hidden' );
			},
			undo: ( section ) => {
				section.mediaquery.classList.add( 'hidden' );
			}
		},
		{ // increase the margin
			do: ( section ) => {
				section.container.style.margin = 'var(--margin) calc( var(--margin) / 2 )';
				section.container.style.gridGap = 'calc( var(--margin) / 2 )';
			},
			undo: ( section ) => {
				section.container.style.margin = 'var(--margin)';	
				section.container.style.gridGap = 'var(--margin)';
			}
		},
		{
			do: ( section ) => {
				section.container.removeChild(section.lastDiv);
			},
			undo: ( section ) => {
				section.container.appendChild(section.lastDiv);
			}
		},
		{
			do: ( section ) => {
				section.mediaquery.innerHTML = 
				 section.mediaquery.innerHTML.replace('571px', '430px');
			},
			undo: ( section ) => {
				section.mediaquery.innerHTML = 
				 section.mediaquery.innerHTML.replace('430px', '571px');
			}
		},
		{
			do: ( section ) => {
				section.mediaquery.classList.add('none');
				section.elementquery.classList.remove('none');
			},
			undo: ( section ) => {
				section.mediaquery.classList.remove('none');
				section.elementquery.classList.add('none');
			}
		}		
	];
	</script>
	<aside class="notes">
An example‚Äôs in order. Let‚Äôs say I've got a line of five, light-blue flexible boxes, like this.

And let‚Äôs say that when these boxes get to be 100px wide, I want to change them in some way ‚Äì¬†like, make them pink.

In order to do that right now, I have to a media query. And in order to write a media query, I have have to figure out how wide the entire viewport here is, just as each element hits 100px-wide. And I have to write my media query with that [click]

Now what I‚Äôve done here, that‚Äôs kludgy and bad, is bake a bunch of external state into this media query. Remember, all I care about is the width of the box. If it's at least 100px, make it pink. But now I'm in a situation where, if things *around* my boxes change -- let's say I tweak my margins [click], or change the number of boxes [click] -- I‚Äôll have to re-write the media query too. That's bad!

What I really want to be able to do, here, is say exactly what I mean. When these specific *elements* are at least 100px wide, turn them pink. I want to be able to write code like this [click].

That's an element query.
	</aside>
</section>

<section id="5">
<h1 class="center">Pretty neat!</h1>
<p>Now show me something useful?</p>
</section>

<section id="5">
<h1>Other use cases</h1>
<ul>
	<li>interactive content</li>
	<li>modular components!</li>
	<li>any kind of content-out (rather than viewport-in) design</li>
</ul>
<aside class="notes">
Interactive content
Best example, this slide deck right here?
toolbars that fly out, resize in response to user input

Modular components
React... Atomic design, pattern libraries
legos

Content-out design
Even if you‚Äôre designing static pages full of one-off design work, even if you don't care about modular reusable components at all
Any time you're design from the content, out, rather than from page dimension and a given set of breakpoints, in -- you want element queries.
- point back to weather widgets
- mobile first, stretch it till it breaks, set a break point
- dont want to have to re-write those breakpoints later, because some other part of the page changed
</aside>
</section>

<section class="title">
<h1>People have been asking</h1>
<p>for element queries</p>
<aside class="notes">

</aside>
</section>

<section>
<blockquote class="twitter-tweet" data-lang="en"><p lang="en" dir="ltr">We need native CSS media queries at the element/component/widget level, not just the viewport. Make it so, internetz.</p>&mdash; Nicolas (@necolas) <a href="https://twitter.com/necolas/status/299573744307941376">February 7, 2013</a></blockquote>
<aside class="notes">
Here‚Äôs the first mention I that could find of the general concept of ‚Äúmedia queries for elements,‚Äù tweeted by twitter engineer Nicolas Gallagher all the way back in 2013.
</aside>
</section>

<section>
<blockquote class="twitter-tweet" data-lang="en"><p lang="en" dir="ltr">Great read about the #1 missing tool for responsive design: Element queries  <a href="http://t.co/EARts4HWWr">http://t.co/EARts4HWWr</a> (viewport queries are still valuable)</p>&mdash; Brad Frost üá∫üá∏ (@brad_frost) <a href="https://twitter.com/brad_frost/status/319929504422322176">April 4, 2013</a></blockquote>
<aside class="notes">
Within months, some of the smartest minds in the indsutry were calling element queries the #1 missing tool for responsive design.
</aside>
</section>


<section>
<blockquote class="twitter-tweet" data-lang="en"><p lang="en" dir="ltr">Ahh, Spring‚Äîwhen a young man‚Äôs fancy turns to thoughts of element queries, what that syntax might look like, and how one might prototype it.</p>&mdash; Mat Marquis (@wilto) <a href="https://twitter.com/wilto/status/466673241130430464">May 14, 2014</a></blockquote>
<aside class="notes">
And within a year, serious efforts were underway to turn what had been an exciting idea into an empowering reality.

But. There were problems. More on those later.

For now, I want to kind of track developer sentiment about element queries over the years, via a series of increasingly sad and desparate tweets.
</aside>
</section>


<section>
<blockquote class="twitter-tweet" data-lang="en"><p lang="en" dir="ltr">Monthly tweet about how _super_ helpful natively supported element queries would be.</p>&mdash; Tim Kadlec (@tkadlec) <a href="https://twitter.com/tkadlec/status/493849870554259457">July 28, 2014</a></blockquote>
<blockquote class="twitter-tweet" data-lang="en"><p lang="en" dir="ltr">Why element queries?<br><br>Less CSS to write, more modular &amp; maintainable CSS/HTML, smarter responsive images, web components, etc.</p>&mdash; Tim Kadlec (@tkadlec) <a href="https://twitter.com/tkadlec/status/493852410700247041">July 28, 2014</a></blockquote>
<aside class="notes">
It starts innocently enough, with earnest pleas and sound arguments.
</aside>
</section>

<section>
<blockquote class="twitter-tweet" data-lang="en"><p lang="en" dir="ltr">Coulda used ElementQueries about 45 times today.</p>&mdash; Dave Rupert (@davatron5000) <a href="https://twitter.com/davatron5000/status/558402932509401088">January 22, 2015</a></blockquote>
<aside class="notes">
But by 2015, impatience started to set in.
</aside>
</section>

<section>
<blockquote class="twitter-tweet" data-lang="en"><p lang="en" dir="ltr">Does anyone know what the current state of <a href="https://twitter.com/hashtag/CSS?src=hash">#CSS</a> Element Queries is? Any updates on whether cyclic dependency can be solved/worked around?</p>&mdash; Sara Soueidan üê¶ (@SaraSoueidan) <a href="https://twitter.com/SaraSoueidan/status/594947884090429440">May 3, 2015</a></blockquote>

<blockquote class="twitter-tweet" data-lang="en"><p lang="en" dir="ltr">If I had to choose only one new CSS feature to be implemented asap, it would be container queries. So much NEED. <a href="https://twitter.com/hashtag/respond16?src=hash">#respond16</a></p>&mdash; Sara Soueidan üê¶ (@SaraSoueidan) <a href="https://twitter.com/SaraSoueidan/status/718308762033987584">April 8, 2016</a></blockquote>

<aside class="notes">
Front end developers began do wonder... is anyone listening?
</aside>
</section>

<section>
<blockquote class="twitter-tweet" data-lang="en"><p lang="en" dir="ltr">Serious question: where are element queries at? Any updates since the last ‚Äúthey cause a loop so we have to figure out how to do this‚Äù one?</p>&mdash; Sara Soueidan üê¶ (@SaraSoueidan) <a href="https://twitter.com/SaraSoueidan/status/807982469714706434">December 11, 2016</a></blockquote>

<blockquote class="twitter-tweet" data-lang="en"><p lang="en" dir="ltr">All I want in 2017 on the Web is Container Queries. Seriously.</p>&mdash; Sara Soueidan üê¶ (@SaraSoueidan) <a href="https://twitter.com/SaraSoueidan/status/812333338744721408">December 23, 2016</a></blockquote>
<aside class="notes">
How many times do we have to say it?
</aside>
</section>

<section>
<blockquote class="twitter-tweet" data-lang="en"><p lang="en" dir="ltr">hypothesis<br><br>If element queries were real, over 50% of the media queries we write would be element queries.</p>&mdash; Chris Coyier (@chriscoyier) <a href="https://twitter.com/chriscoyier/status/668796363900100613">November 23, 2015</a></blockquote>
<aside class="notes">
Doesn‚Äôt anybody understand what a big deal element queries would be?
</aside>
</section>


<section>
<blockquote class="twitter-tweet" data-lang="en"><p lang="en" dir="ltr">I wonder when and if we‚Äôll ever get Container Queries in CSS. It‚Äôs only possibly the most useful RWD technique. The wait is depressing.</p>&mdash; Sara Soueidan üê¶ (@SaraSoueidan) <a href="https://twitter.com/SaraSoueidan/status/744117584941875200">June 18, 2016</a></blockquote>
<aside class="notes">
Evidently, they don't.
</aside>
</section>

<section>
<blockquote class="twitter-tweet" data-lang="en"><p lang="en" dir="ltr">That time of day when you run into a CSS layout that‚Äôs going to be a total hack job to build without element/container queries.</p>&mdash; Scott Jehl (@scottjehl) <a href="https://twitter.com/scottjehl/status/723575660065726465">April 22, 2016</a></blockquote>
<aside class="notes">
A certain fatalism began to creep into the conversation.
</aside>
</section>

<section>
<blockquote class="twitter-tweet" data-lang="en"><p lang="en" dir="ltr">are container queries here yet<br><br>dot tumblr dot corn</p>&mdash; Ethan Marcotte (@beep) <a href="https://twitter.com/beep/status/723156713373732865">April 21, 2016</a></blockquote>
<aside class="notes">
Dry humor.
</aside>
</section>

<section>
<div  style="zoom: 0.75;">
<blockquote class="twitter-tweet" data-lang="en"><p lang="en" dir="ltr">Well, I tried. <a href="https://t.co/mCfx2Tor0O">pic.twitter.com/mCfx2Tor0O</a></p>&mdash; Zach Leatherman (@zachleat) <a href="https://twitter.com/zachleat/status/743219273275826176">June 15, 2016</a></blockquote>
</div>
<aside class="notes">
Desperate cries for help
</aside>
</section>

<section>
<!--
<blockquote class="twitter-tweet" data-lang="en"><p lang="en" dir="ltr">conspiracy theories<br>conspiracy queries<br>container queries<a href="https://twitter.com/hashtag/emghazi?src=hash">#emghazi</a></p>&mdash; Zach Leatherman (@zachleat) <a href="https://twitter.com/zachleat/status/748624323955482624">June 30, 2016</a></blockquote>
-->
<blockquote class="twitter-tweet" data-lang="en"><p lang="en" dir="ltr">FUTURE BROWSER v154.2 release notes<br>* JS engine optimizations‚Äîtechnically now a time machine<br>* nothing on container queries yet‚Äîstop asking</p>&mdash; Zach Leatherman (@zachleat) <a href="https://twitter.com/zachleat/status/748241672757084160">June 29, 2016</a></blockquote>
<aside class="notes">
Hopelessness
</aside>
</section>

<section>
<blockquote class="twitter-tweet" data-lang="en"><p lang="und" dir="ltr">I want my <br>element <br>element<br>element<br>I want my element<br>element<br>element<br>element<br>Chilis element queries, Chilis element queries<br>barbecue sauce</p>&mdash; Brad Frost üá∫üá∏ (@brad_frost) <a href="https://twitter.com/brad_frost/status/765926034604695552">August 17, 2016</a></blockquote>
<aside class="notes">
And for some, sadly, madness.
</aside>
</section>



<!--
<section>
<blockquote class="twitter-tweet" data-lang="en"><p lang="en" dir="ltr">üëè Everything üëè I üëè build üëè needs üëè element üëè queries üëè</p>&mdash; OUTNMBRD (@marcamos) <a href="https://twitter.com/marcamos/status/791092232317177856">October 26, 2016</a></blockquote>
</section>
-->

<section>
<blockquote class="twitter-tweet" data-lang="en"><p lang="en" dir="ltr">The fact that we‚Äôll probably get stable, cross browser WebVR before container queries is a good example of what‚Äôs wrong with our industry.</p>&mdash; Zach Leatherman (@zachleat) <a href="https://twitter.com/zachleat/status/790926735156011008">October 25, 2016</a></blockquote>
<aside class="notes">
Throughout all of this, personally, I‚Äôve found that the truest tweets have been the saddest of all
</aside>
</section>

<!--
<section>
<blockquote class="twitter-tweet" data-lang="en"><p lang="en" dir="ltr">I&#39;d give my little finger for well-supported element queries right now.</p>&mdash; Bro(ton)grammer (@joshbroton) <a href="https://twitter.com/joshbroton/status/839157248693792771">March 7, 2017</a></blockquote>
</section>
-->

<section>
<blockquote class="twitter-tweet" data-lang="en"><p lang="en" dir="ltr"><a href="https://twitter.com/grigs">@grigs</a> DO CONTAINER QUERIES NEXT <a href="https://t.co/fVT8NXGnqQ">pic.twitter.com/fVT8NXGnqQ</a></p>&mdash; Ethan Marcotte (@beep) <a href="https://twitter.com/beep/status/862791570826960896">May 11, 2017</a></blockquote>
<aside class="notes">
But for those who, in 2017, still nurture hope, the message is loud and clear
</aside>
</section>

<section class="title">
<h1>What‚Äôs the hold up?</h1>
<aside class="notes">
Before we can talk about that, need to talk about how browsers work.
</aside>
</section>

<section>
<h1>Browsers</h1>
<p>[browser diagram goes here]</p>
<aside class="notes">
HTML ‚Üí DOM
            >‚Üí Rendering tree ‚Üí Box tree ‚Üí Layout 
CSS ‚Üí CSSOM
</aside>
</section>

<section>
<h1>Layout depending on layout</h1>
<p>Three problems</p>
<div style="font-size: 0.4em; font-family: sans-serif !important;">
<ol>
	<li>Potential for Circularity
		<ol>
			<li>As millions of Microsoft Excel know, cicular references are bad and confusing [screenshot]</li>
			<li>Fun demo!
				<ol>
					<li>anything that changes the width</li>
				</ol>
			</li>
			<li>Container queries idea
				<li>first iteration, nah
					<ol>
						<li>because containers can depend on the width of their contents
						</li>
					</ol>
				</li>
				<li>Ausi‚Äôs, yeah?</li>
			</li>
			<li>A blunter tool: <code>contain: strict;</code>
				<ol>
					<li>Is this going to be weird and limiting?</li>
				</ol>
			</li>
		</ol>
	</li>
	<li>Breaks a fundamental assumption of browser layout engines
		<ol>
			<li>1-pass layout.</li>
			<li>Again, layout is really complicated</li>
			<li>Browsers were built to go from rendering tree ‚Üí layout exactly once. Always have, are heavily optimized around that assumption, and talk about changing it with scary words like ‚Äúfundamental architectural layering violation‚Äù</li>
			<li>Not impossible, but a whole, whole lot of work</li>
		</ol>
	</li>
	<li>Fundamentally slow
		<ol>
			<li>Despite being so complicated, layout needs to happen FAST</li>
			<li>You can re-architect layout engines to make two-pass layout possible, but it‚Äôs always going to be slower, and opens the door for extreme slowness. 
				<ol>
					<li>(nested 2 pass layouts, even if none are infinte)</li>
					<li>Dave baron quote</li>
				</ol>
			</li>
			<li>Resizing, specifically, is a very hot path - potentially having to re-do large swaths of potentially-many-pass layout on every frame is REALLY BAD
				<ol>
					<li>Example?</li>
				</ol>
			</li>
			<li>We‚Äôve made this mistake before: microsoft‚Äôs mistake</li>
			<li>Solution: Asynchronous
				<ol>
					<li>What is a synchronus</li>
					<li>ResizeObserver</li>
				</ol>
			</li>
		</ol>
	</li>
</ol>
</div>
<aside class="notes">
Before we can talk about that, need to talk about how browsers work.
</aside>
</section>

<section>
</section>

<section class="title">
<h1>Is anyone doing element queries?</h1>
<p>Yes. Slowly.</p>
</section>

<section>
<h1>In the wild</h1>
<ul>
<li>Spotify backend</li>
<li>weather.com news modules</li>
<li>some real estate website...</li>
</ul>
<p>source: dave rupert gist</p>
</section>

<section>
<h1>Speculative polyfills</h1>
<p>cq-prollyfill, eqcss</p>
</section>

<section>
<h1>What can you do?</h1>
<p>If you know some C and have been looking to get your hands dirty</p>
<aside class="notes">
Authors who are actually going to use the thing
Spec editors who can specify it
Browser vendors who are willing + able to implement it
	- Yoav took the RICG over the line with responsive images, took a deep dive into performance, networking, and resource loading
	- Layout engine is another dragon. The web needs another knight in shining armor.

</aside>
</section>



</body>
</html>